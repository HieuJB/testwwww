import{d as H,r as c,J as W,b as C,g as B,w as V,t as Y,o as d,c as v,h as i,A as y,F as I,z as P,y as j,K as F,i as h,m as X,l as z,L as D,j as J}from"./CnJNAMZb.js";import{C as K,S as f}from"./DRizsLw2.js";import{g as q}from"./3bue5Vy1.js";import{R as Q,a as $,A}from"./Bxk5PY0E.js";import{c as Z}from"./7sItJrXI.js";import{a as ee}from"./Cbzb-SDH.js";import{_ as te,a as ne}from"./CnAzBXKT.js";import{s as ae}from"./D0xLcGF1.js";import"./DaEl2alL.js";import"./C4iS2aBk.js";const se={class:"mcontent"},le={id:"main",class:"listpage container"},ie={class:"newsbox"},oe={class:"Htitle",id:"tag"},ce={class:"news row d-flex",id:"alist"},re={class:"artimg"},ue=["src","alt"],_e={class:"match"},de={class:"time"},me={key:0,class:"pagination-container mt-4 d-flex justify-content-center"},ve=["disabled"],he=i("img",{src:te,width:"20px",height:"20px"},null,-1),fe=[he],ge=["disabled","onClick"],ye=["disabled"],Te=i("img",{src:ne,width:"20px",height:"20px"},null,-1),Re=[Te],we=["innerHTML"],be=H({__name:"CategoryPost",setup(U){const O=ae(),T=c([]),r=c(1),S=c(K),g=c(0),k=W(),m=c([]);c(!1);let t=k.currentRoute.value.params.category;t||(t=k.currentRoute.value.path,t=(t==null?void 0:t.indexOf("/"))==0?t==null?void 0:t.substring(1):t,(t==null?void 0:t.lastIndexOf("/"))!==-1&&(t=t==null?void 0:t.slice(0,t.lastIndexOf("/"))));const o=c([]),R=q(O.configurations,"image_size");o.value=R==null?void 0:R.split(",");const _=c(0),w=c(),b=c();c();const p=C(()=>{var s,a,l;return _.value<f.MD&&((s=o==null?void 0:o.value)==null?void 0:s.length)>=1?o.value[1]:_.value>=f.MD&&_.value<f.LG&&((a=o==null?void 0:o.value)==null?void 0:a.length)>=2?o.value[2]:_.value>=f.LG&&_.value<f.XXL&&((l=o==null?void 0:o.value)==null?void 0:l.length)>=3?o.value[3]:""}),N=(s,a)=>{let l=s-2,n=s+2;l<1&&(l=1,n=Math.min(5,a)),n>a&&(n=a,l=Math.max(1,n-4));const u=[];for(let e=l;e<=n;e++)u.push(e);return u},G=C(()=>N(r.value,g.value)),x=s=>{r.value=s,E(t)},E=async s=>{var a,l;try{const{data:n}=await $(A.POST.LIST,{params:{category_code:s,limit:S.value,page:r.value}},"$47OYsaj8vY");T.value=(a=n==null?void 0:n.value)==null?void 0:a.posts,g.value=Math.ceil(((l=n==null?void 0:n.value)==null?void 0:l.count_all)/S.value)}catch(n){console.error(n)}};return(async s=>{try{await $(Z(A.POST.CATEGORY.DETAIL+s,{}),"$LMUUmalzmV").then(a=>{var l,n,u,e;m.value=(l=a==null?void 0:a.data)==null?void 0:l.value,w.value=(n=m.value)==null?void 0:n.name,b.value=((u=m.value)==null?void 0:u.meta_description)??((e=m.value)==null?void 0:e.name)})}catch{}})(t),B({title:()=>w.value,meta:[{name:"description",content:()=>b.value},{property:"og:title",content:()=>w.value},{property:"og:description",content:()=>b.value}]}),V(()=>t,()=>{E(t)}),E(t),Y(()=>{_.value=window.innerWidth,window.addEventListener("resize",()=>{_.value=window.innerWidth})}),(s,a)=>{var n,u;const l=D;return d(),v("div",se,[i("div",le,[i("div",ie,[i("h1",oe,y((n=m.value)==null?void 0:n.name),1),i("ul",ce,[(d(!0),v(I,null,P(T.value,e=>(d(),v("li",{key:e==null?void 0:e.id,class:"article mb-3 col-12 col-sm-6 col-lg-3"},[j(l,{to:("ROUTERS"in s?s.ROUTERS:h(Q)).NEWS+"/"+(e==null?void 0:e.slug)},{default:F(()=>{var L,M;return[i("div",re,[i("img",{src:h(p)?`${(L=e==null?void 0:e.thumbnail)==null?void 0:L.file_path}!${h(p)}`:(M=e==null?void 0:e.thumbnail)==null?void 0:M.file_path,alt:e.title},null,8,ue)]),i("h2",_e,y(e==null?void 0:e.title),1)]}),_:2},1032,["to"]),i("div",de,[i("span",null,y(e!=null&&e.post_date?("formatTimeSince"in s?s.formatTimeSince:h(ee))(e==null?void 0:e.post_date):""),1)])]))),128))]),g.value>0?(d(),v("div",me,[i("button",{disabled:r.value<=1,onClick:a[0]||(a[0]=e=>x(r.value-1))},fe,8,ve),(d(!0),v(I,null,P(h(G),e=>(d(),v("button",{key:e,disabled:e===r.value,onClick:L=>x(e),class:X(e===r.value?"on":"")},y(e),11,ge))),128)),i("button",{disabled:r.value>=g.value,onClick:a[1]||(a[1]=e=>x(r.value+1))},Re,8,ye)])):z("",!0),i("div",{id:"content-page",innerHTML:(u=m.value)==null?void 0:u.content},null,8,we)])])])}}}),$e={__name:"[category]",setup(U){return c(!1),(O,T)=>{const r=be;return d(),J(r)}}};export{$e as default};
