import{N as oe,dh as ae,dl as le,bL as j,aN as c,bt as ne,az as K,bO as J,o as T,c as Q,w as t,bA as k,bp as M,bd as o,ah as S,b4 as B,bD as ie,aJ as re,aG as de,cV as ce,ca as ue,ap as pe,_ as me,u as _e,v as ve,c7 as he}from"./C0DZl7YE.js";const h=g=>(re("data-v-9c5a5203"),g=g(),de(),g),ge={class:"txtBox"},fe=h(()=>t("span",{class:"icon iconfont icon-font-username"},null,-1)),xe=["placeholder","title"],be={class:"txtBox"},we=h(()=>t("span",{class:"icon iconfont icon-font-mail"},null,-1)),Re=["placeholder","title"],ye={class:"txtBox"},ke=h(()=>t("span",{class:"icon iconfont icon-font-username"},null,-1)),Me=["placeholder","title"],Se={class:"txtBox"},$e=h(()=>t("span",{class:"icon iconfont icon-font-password"},null,-1)),Be=["placeholder","title"],Ce={class:"txtBox"},Ee=h(()=>t("span",{class:"icon iconfont icon-font-password"},null,-1)),Le=["title","placeholder"],Te=h(()=>t("div",{id:"lg_msg"},null,-1)),Fe={class:"row"},Ie={class:"col-12"},Ne={class:"row"},Oe={class:"col-12"},Pe=oe({__name:"RegisterForm.client",emits:["closeModalRegister","openModalLogin"],setup(g,{emit:C}){const u=ae(),i=le(),{useLocale:F,$t:s}=j(),f=C,x=c(!1),r=c(""),b=c(""),m=c(""),d=c(""),_=c(""),I=c(""),W=c(!1),a=c([]),X=async()=>{var p,e,l,w,R,y,O,P,V,U,A,q,z,D,G,Z,H;try{const{data:n,pending:$,error:v,refresh:Ke}=await ce(ue.AUTH.REGISTER,{method:"POST",body:{user_name:r.value,nick_name:r.value,email:m.value?m.value:null,phone:I.value,password:d.value,passwordConfirm:_.value}},"$66udBtRn6p");if(v.value){typeof((l=(e=(p=v.value)==null?void 0:p.data)==null?void 0:e.data)==null?void 0:l.detail)=="string"?a.value=[{msg:s((y=(R=(w=v.value)==null?void 0:w.data)==null?void 0:R.data)==null?void 0:y.detail)}]:a.value=s((V=(P=(O=v.value)==null?void 0:O.data)==null?void 0:P.data)==null?void 0:V.detail);let E="";(U=a.value)==null||U.forEach(L=>E+=L==null?void 0:L.msg),E&&u.add({type:"error",text:E})}else u.add({type:"success",text:(A=n==null?void 0:n.value)!=null&&A.message?s((q=n==null?void 0:n.value)==null?void 0:q.message):s("Registration successful")}),pe(()=>{te(),f("closeModalRegister",!0)})}catch(n){(D=(z=n==null?void 0:n.response)==null?void 0:z._data)!=null&&D.detail?a.value=[{msg:s((Z=(G=n==null?void 0:n.response)==null?void 0:G._data)==null?void 0:Z.detail)}]:a.value=[{msg:s("An error occurred during registration")}];let $="";a!=null&&a.value&&((H=a.value)==null||H.forEach(v=>$+=v==null?void 0:v.msg),$&&u.add({type:"error",text:$}))}},Y=p=>{var l,w,R,y;a.value=[];let e="";if(!((l=String(r.value))!=null&&l.trim()))return e=s("Nickname is required"),a.value.push({msg:e}),u.add({type:"error",text:e}),!1;if(!((w=String(d.value))!=null&&w.trim()))return e=s("Password is required"),a.value.push({msg:e}),u.add({type:"error",text:e}),!1;if(!((R=String(_.value))!=null&&R.trim()))return e=s("Re-entering password is required"),a.value.push({msg:e}),u.add({type:"error",text:e}),!1;if(d.value&&_.value&d.value!==_.value)return e=s("Re-enter password must match password"),a.value.push({msg:e}),u.add({type:"error",text:e}),!1;if(m.value&&!ee(m.value))return e=s("Email is not in correct format"),a.value.push({msg:e}),u.add({type:"error",text:e}),!1;if(!((y=a.value)!=null&&y.length))return!0},ee=p=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(p),N=p=>{var e;Y(),(e=a.value)!=null&&e.length||X()},te=()=>{r.value="",b.value="",m.value="",d.value="",_.value="",a.value=[],I.value=""},se=()=>{f("openModalLogin",!0)};return ne(i,()=>{i!=null&&i.isOpenRegisterForm&&(x.value=i==null?void 0:i.isOpenRegisterForm)}),K(()=>{const p=J("userNickname").value,e=J("userPassword").value;p&&e&&(r.value=p,d.value=e,W.value=!0)}),(p,e)=>(T(),Q("form",{id:"lg_form",name:"lg_form",method:"post",onSubmit:ie(N,["prevent"])},[t("div",ge,[fe,k(t("input",{id:"mobile","onUpdate:modelValue":e[0]||(e[0]=l=>S(b)?b.value=l:null),type:"text",placeholder:o(s)("Tel"),title:o(s)("Tel")},null,8,xe),[[M,o(b)]])]),t("div",be,[we,k(t("input",{id:"email","onUpdate:modelValue":e[1]||(e[1]=l=>S(m)?m.value=l:null),type:"text",placeholder:o(s)("Email"),title:o(s)("Email")},null,8,Re),[[M,o(m)]])]),t("div",ye,[ke,k(t("input",{id:"nickname","onUpdate:modelValue":e[2]||(e[2]=l=>S(r)?r.value=l:null),type:"text",placeholder:o(s)("Account"),title:o(s)("Account")},null,8,Me),[[M,o(r)]])]),t("div",Se,[$e,k(t("input",{id:"password","onUpdate:modelValue":e[3]||(e[3]=l=>S(d)?d.value=l:null),autocomplete:"on",type:"password",placeholder:o(s)("Password"),title:o(s)("Password")},null,8,Be),[[M,o(d)]])]),t("div",Ce,[Ee,k(t("input",{id:"repassword","onUpdate:modelValue":e[4]||(e[4]=l=>S(_)?_.value=l:null),type:"password",title:o(s)("Re-enter password"),placeholder:o(s)("Re-enter password")},null,8,Le),[[M,o(_)]])]),Te,t("div",Fe,[t("div",Ie,[t("div",{class:"button--max button--success col-12 inline",onClick:N},B(o(s)("Register")),1)])]),t("div",Ne,[t("div",Oe,[t("div",{class:"button button--max col-12 inline",onClick:se},B(o(s)("Login")),1)])])],32))}}),Ve=me(Pe,[["__scopeId","data-v-9c5a5203"]]),Ue=he(Ve),Ae={ref:"modalRegister",class:"modal fade",id:"modal_register",tabindex:"-1","aria-labelledby":"modal_register_label","aria-hidden":"true"},qe={class:"modal-dialog modal-dialog-centered"},ze={class:"modal-content"},De={class:"modal-header d-none"},Ge={class:"modal-title",id:"modal_register_label"},Ze=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),He={id:"login_body",class:"regBox"},Je={class:"title"},je={class:"mh2"},We={__name:"ModalRegister",emits:["openModalLogin"],setup(g,{emit:C}){const u=C,i=c(null),F=c(!0),{useLocale:s,$t:f}=j();K(()=>{i.value=new bootstrap.Modal(document.getElementById("modal_register"),{}),i.value.show()});const x=async()=>{i.value&&i.value.hide()},r=()=>{x(),setTimeout(()=>{u("openModalLogin")},200)};return(b,m)=>{const d=Ue;return T(),Q("div",Ae,[t("div",qe,[t("div",ze,[t("div",De,[t("div",Ge,B(o(f)("Register")),1),Ze]),t("div",He,[t("div",Je,[t("span",{onClick:r,class:"peer icon iconfont icon-font-return back"}),t("div",je,B(o(f)("Register")),1),t("span",{class:"iconfont icon-close",onClick:x})]),o(F)?(T(),_e(d,{key:0,onCloseModalRegister:x,onOpenModalLogin:r})):ve("",!0)])])])],512)}}};export{We as default};
